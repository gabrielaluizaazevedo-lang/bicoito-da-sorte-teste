<!DOCTYPE html>
<div id="fortuneModal" class="fortune-modal" role="dialog" aria-modal="true" aria-hidden="true">
<div class="fortune-content" role="document" aria-live="polite">
<div id="cookie" class="cookie" aria-hidden="false">🍪</div>
<div id="fortuneText" tabindex="0"></div>
<button id="fortuneBtn" class="fortuneBtn">Ver a sorte do dia</button>
</div>
</div>


<script>
(function(){
const FORTUNES = [
"A sorte sorrirá para você hoje!",
"Grandes mudanças estão a caminho.",
"Confie em si mesmo e tudo será possível.",
"Uma oportunidade inesperada surgirá.",
"Você está prestes a viver algo incrível.",
"Seu esforço será recompensado em breve.",
"Uma surpresa agradável espera por você.",
"A sua persistência vai valer a pena."
];


const openCookieBtn = document.getElementById('openCookieBtn');
const modal = document.getElementById('fortuneModal');
const cookie = document.getElementById('cookie');
const fortuneText = document.getElementById('fortuneText');
const fortuneBtn = document.getElementById('fortuneBtn');


function openModal(){
const today = new Date().toISOString().split('T')[0];
const lastOpened = localStorage.getItem('sorteData');


if(lastOpened === today){
alert("Você já abriu sua sorte hoje! 🍀");
return;
}


modal.style.display = 'flex';
modal.setAttribute('aria-hidden','false');
cookie.style.display = 'block';
cookie.textContent = '🍪';
fortuneText.style.display = 'none';
fortuneBtn.style.display = 'none';
}


function showFortune(){
const today = new Date().toISOString().split('T')[0];
const lastOpened = localStorage.getItem('sorteData');


if(lastOpened === today) return;


const idx = Math.floor(Math.random() * FORTUNES.length);
fortuneText.textContent = FORTUNES[idx];
cookie.textContent = '💥🍪';


localStorage.setItem('sorteData', today);


setTimeout(() => {
cookie.style.display = 'none';
fortuneText.style.display = 'block';
fortuneBtn.style.display = 'inline-block';
}, 500);
}


openCookieBtn.addEventListener('click', openModal);
cookie.addEventListener('click', showFortune);
fortuneBtn.addEventListener('click', () => { modal.style.display='none'; });


document.addEventListener('keydown', (ev) => { if(ev.key==='Escape') modal.style.display='none'; });
modal.addEventListener('click', (ev) => { if(ev.target===modal) modal.style.display='none'; });
})();
</script>
</body>
</html>
